<!DOCTYPE html>
<html lang="en" amp><head>
    <title>Forget "autowire" and just use it | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

    

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">


    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">

    

    

    

<noscript>
<style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style>
</noscript>
<link rel="canonical" href="/blog/2016/07/18/forget-autowire-just-use-it/index.html">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<script async src="https://cdn.ampproject.org/v0.js"></script>
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
</head>
    <body>
<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li>
                    <a href="/mentoring-and-lectures/">Mentoring &amp; Lectures</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/contact/">Contact</a>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fa fa-book"></em>
                <br>
                PHP Blog
            </a>
            <a href="/mentoring-and-lectures/" class="col-3 col-sm-3">
                <em class="fa fa-graduation-cap"></em>
                <br>
                Lectures
            </a>
            <a href="/about/" class="col-3 col-sm-3">
                <em class="fa fa-id-badge"></em>
                <br>
                About
            </a>
            <a href="/contact/" class="col-3 col-sm-3">
                <em class="fa fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>
</div>

        <div class="mainContent">
    <div class="container-fluid" id="post">
        <h1>Forget "autowire" and just use it</h1>

<ul class="list-inline">
    <li class="list-inline-item">
        <em class="fa fa-clock-o fa-fw"></em>
        <strong>2 min</strong>
    </li>

    <li class="list-inline-item">
        <em class="fa fa-calendar fa-fw"></em>
        <time datetime="2016-07-Mon">Monday, July 18, 2016</time>
    </li>

        <li class="list-inline-item">
            <em class="fa fa-fw fa-comments"></em>
            <a href="https://www.tomasvotruba.cz/blog/2016/07/18/forget-autowire-just-use-it/#disqus_thread">X</a> comments
        </li>

        <li class="list-inline-item">
            <em class="fa fa-fw fa-pencil"></em>

            <a href="https://github.com/TomasVotruba/tomasvotruba.cz/edit/master/source/_posts/2016/2016-07-18-forget-autowire-just-use-it.md">
                Improve this Post
            </a>
        </li>
</ul>

            <div class="card border-danger">
                <div class="card-header text-white bg-danger border-danger">
                    <strong>Content of this post is deprecated since May 2017</strong>
                </div>
                <div class="card-body">
                    You can set autowiring via <a href="https://symfony.com/blog/new-in-symfony-3-3-simpler-service-configuration#default-service-configuration">new <code>_defaults</code> per config file feature</a>
since <strong>Symfony 3.3</strong>.
<br><br> 
It does pretty much the same thing, with <strong>advantage of having it under control and explicitly defined</strong>.
<br><br>
I recommend using it instead!
                </div>
            </div>

            <br>


        <div class="card">
            <div class="card-body">
                Autowiring is a great feature that was added in Symfony 2.8. It moves Dependency Injection pattern to the next level.
If you want to use it to its full potential, you still have to add 1 extra line to every service configuration.
Today I will show you, how to get rid of that line.
            </div>
        </div>

        
<h2 id="when-to-autowire"><a class="anchor" href="#when-to-autowire" aria-hidden="true"><span class="anchor-icon">#</span></a>When to autowire?</h2>
<p>If you use autowiring daily, you might came across this thinking process before you place <code>autowired: true</code> to your config:</p>
<p><em>1) Has this service constructor dependency?</em></p>
<ul>
<li>No =&gt; skip</li>
<li>Yes =&gt; go on</li>
</ul>
<p><em>2) Is it object?</em></p>
<ul>
<li>No =&gt; skip</li>
<li>Yes =&gt; go on</li>
</ul>
<p><em>3) Is it unique service type?</em></p>
<ul>
<li>No =&gt; add <a href="https://github.com/symfony/symfony/pull/21494"><code>alias</code> for specific name to required service</a></li>
<li>Yes =&gt; autowire</li>
</ul>
<p><em>4) Has the constructor changed during development?</em></p>
<ul>
<li>Start from point 1.</li>
</ul>
<p>Plus some more logic for edge cases like parameters and factories.</p>
<h2 id="seems-like-function-could-this-be-automated"><a class="anchor" href="#seems-like-function-could-this-be-automated" aria-hidden="true"><span class="anchor-icon">#</span></a>Seems like function... Could this be automated?</h2>
<p>You are right! <strong>It can be automated.</strong></p>
<p>This is exactly what <a href="https://github.com/Symplify/DefaultAutowire">Symplify/DefaultAutowire</a> bundle does.</p>
<p>Apart handling feature above for you, it will turn this...</p>
<pre><code class="language-yaml"># app/config/config.yml
services:
    PriceCalculator:
        autowire: true

    ProductRepository:
        autowire: true

    UserFactory:
        autowire: true</code></pre>
<p>...into this:</p>
<pre><code class="language-yaml"># app/config/config.yml
services:
    PriceCalculator: ~

    ProductRepository: ~

    UserFactory: ~</code></pre>
<h2 id="get-it-done-in-2-steps"><a class="anchor" href="#get-it-done-in-2-steps" aria-hidden="true"><span class="anchor-icon">#</span></a>Get It Done in 2 steps</h2>
<h3 id="1-install-package"><a class="anchor" href="#1-install-package" aria-hidden="true"><span class="anchor-icon">#</span></a>1. Install package</h3>
<pre><code class="language-yaml">composer require symplify/default-autowire</code></pre>
<h3 id="2-register-bundle"><a class="anchor" href="#2-register-bundle" aria-hidden="true"><span class="anchor-icon">#</span></a>2. Register bundle</h3>
<pre><code class="language-php">// app/AppKernel.php

final class AppKernel extends Kernel
{
    public function registerBundles(): array
    {
        $bundles = [
            new Symplify\DefaultAutowire\SymplifyDefaultAutowireBundle(),
            // ...
        ];
    }
}</code></pre>
<p>And that's it!</p>
<p>For further use, <strong>just check Readme for <a href="https://github.com/Symplify/DefaultAutowire">Symplify/DefaultAutowire</a>.</strong></p>

        <br>



<div class="hireMe card border-info">
    <div class="card-body bg-info text-white text-center">
        <a href="/contact">
            Do you like what I write about? <strong>I'll do it for you!</strong>
        </a>
    </div>
</div>

        <br>

        <h3>What do you think?</h3>

<div id="disqus_thread"></div>


    </div>
        </div>

    
    




    </body>




    <meta property="og:type" content="article">
    <meta property="og:title" content="Forget &quot;autowire&quot; and just use it">
    <meta property="og:description" content="Autowiring is a great feature that was added in Symfony 2.8. It moves Dependency Injection pattern to the next level.
If you want to use it to its full potential, you still have to add 1 extra line to every service configuration.
Today I will show you, how to get rid of that line.">
    <meta property="og:url" content="https://www.tomasvotruba.cz/blog/2016/07/18/forget-autowire-just-use-it">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="Forget &quot;autowire&quot; and just use it">
    <meta name="twitter:description" content="Autowiring is a great feature that was added in Symfony 2.8. It moves Dependency Injection pattern to the next level.
If you want to use it to its full potential, you still have to add 1 extra line to every service configuration.
Today I will show you, how to get rid of that line.">


    
    


    <link href="/assets/prism/prism.css" type="text/css">
</html>
